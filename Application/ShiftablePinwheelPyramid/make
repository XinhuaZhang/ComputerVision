#/bin/bash

export OMP_NUM_THREADS=16
FLAG="--make -O2 -j4 -threaded -rtsopts -fno-liberate-case -funfolding-use-threshold1000 -funfolding-keeness-factor1000  -funbox-strict-fields -fllvm -optlo-O3  " #-fllvm -optlo-O3 -XBangPatterns
OBJPATH="../../Classifier/LibLinear/"
SVMPATH="../../Classifier/LibSVM/"
LIBS="-lstdc++ -llapack -lblas  -lgomp -lfftw3 -lfftw3f -lfftw3l -lm" # -lfftw3 -lfftw3f -lfftw3l -lm
LIBS1="$OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o"

cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o ShiftablePinwheelRingPyramidKMeansModel.hs -o shiftablePinwheelRingPyramidKMeansModel
cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o TrainShiftablePinwheelRingPyramid.hs -o trainShiftablePinwheelRingPyramid
cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o PredictShiftablePinwheelRingPyramid.hs -o predictShiftablePinwheelRingPyramid &

cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o ShiftablePinwheelBlobPyramidKMeansModel.hs -o shiftablePinwheelBlobPyramidKMeansModel &
cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o TrainShiftablePinwheelBlobPyramid.hs -o trainShiftablePinwheelBlobPyramid &
cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o PredictShiftablePinwheelBlobPyramid.hs -o predictShiftablePinwheelBlobPyramid &

cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o TrainShiftablePinwheel.hs -o trainShiftablePinwheel &
cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o PredictShiftablePinwheel.hs -o predictShiftablePinwheel &

cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o ShiftablePinwheelKMeansModel.hs -o shiftablePinwheelKMeansModel &
cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o TrainShiftablePinwheelMultiCenter.hs -o trainShiftablePinwheelMultiCenter &
cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o PredictShiftablePinwheelMultiCenter.hs -o predictShiftablePinwheelMultiCenter &

cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o ShiftablePinwheelRingLogGaborKMeansModel.hs -o shiftablePinwheelRingLogGaborKMeansModel &
cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o TrainShiftablePinwheelRingLogGabor.hs -o trainShiftablePinwheelRingLogGabor &
cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o PredictShiftablePinwheelRingLogGabor.hs -o predictShiftablePinwheelRingLogGabor &

## cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o ImageTransformationTest.hs -o imageTransformationTest &

cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o ShiftablePinwheelBlobPyramidKMeansModel2Layers.hs -o shiftablePinwheelBlobPyramidKMeansModel2Layers &
cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o TrainShiftablePinwheelBlobPyramid2Layers.hs -o trainShiftablePinwheelBlobPyramid2Layers &
cabal exec -- ghc $FLAG $LIBS -i../../ $OBJPATH/linear.o $OBJPATH/tron.o $SVMPATH/svm.o PredictShiftablePinwheelBlobPyramid2Layers.hs -o predictShiftablePinwheelBlobPyramid2Layers &

wait